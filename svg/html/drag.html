<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>窗口拖拽（改变大小/最小化/最大化/还原/关闭）</title>
    <style type="text/css">
        .drag-box {
            width: 100px;
            height: 100px;
            background: #f00;
            cursor: pointer;
            position: absolute;
            right: 0;
            top: 0;
            z-index: 10;
        }
        
        .room-wrap {
            position: relative;
        }
    </style>

</head>

<body>
    <div class="room-wrap">
        <img src="../img/bg.png" alt="" class="room">
    </div>
    <div class="drag-box-wrap">
        <div class="drag-box"></div>
    </div>


    <script src="../js/jquery.js"></script>
    <script src="../js/drag.js"></script>

    <script>
        $(document).ready(function() {
            var move = false; //移动标记 
            var _x, _y; //鼠标离控件左上角的相对位置 ;
            var obj = $(".drag-box");

            obj.mousedown(function(e) {

                move = true;
                _x = e.pageX - parseInt(obj.css("left"));
                _y = e.pageY - parseInt(obj.css("top"));
            });
            $(document).mousemove(function(e) {
                var newObj = $('.drag-box-wrap').clone(true).appendTo($('.drag-box-wrap'));
                if (move) {
                    var x = e.pageX - _x; //控件左上角到屏幕左上角的相对位置 
                    var y = e.pageY - _y;
                    obj.css({
                        "top": y,
                        "left": x
                    });
                }
            }).mouseup(function() {
                move = false;
            })
        });
    </script>
</body>

</html>