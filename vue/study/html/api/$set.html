<!DOCTYPE html>
<html>

<head lang="en">
    <meta charset="UTF-8">
    <title></title>
</head>

<body>
    <div id="app2">
        <p v-for="item in items" :key="item.id">
            {{item.message}}
        </p>
        <button class="btn" @click="btn2Click()">动态赋值</button><br/><br/>
        <button class="btn" @click="btn3Click()">为data新增属性</button>
    </div>

    <script src='https://cdn.jsdelivr.net/npm/vue/dist/vue.js'></script>
    <script>
        var vm2 = new Vue({
            el: "#app2",
            data: {
                items: [{
                    message: "Test one",
                    id: "1"
                }, {
                    message: "Test two",
                    id: "2"
                }, {
                    message: "Test three",
                    id: "3"
                }]
            },
            methods: {
                //修改
                btn2Click: function() {
                    //Vue methods中的this 指向的是Vue的实例，这里可以直接在this中找到items
                    // this.items[0] = {
                    //         message: "Change Test",
                    //         id: '10'
                    //     }

                    // this.$nextTick(function() {
                    //         console.log(10);
                    //         this.items[0] = {
                    //             message: "Change Test",
                    //             id: '10'
                    //         }
                    //     })

                    Vue.set(this.items, 0, {
                        message: "Change Test",
                        id: '10'
                    })
                },
                //增加
                btn3Click: function() {
                    var itemLen = this.items.length;
                    Vue.set(this.items, itemLen, {
                        message: "Test add attr",
                        id: itemLen
                    });
                }
            }
        });
    </script>
</body>

</html>